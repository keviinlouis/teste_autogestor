webpackJsonp([1],{101:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-btn",{staticClass:"mb-2",attrs:{color:"accent",dark:""},on:{click:e.criarUsuario}},[e._v("Novo Usuario")]),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.dialog.title))])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{label:"Email",name:"email","error-messages":e.errors.first("email")?e.errors.first("email"):[]},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.salvar(t):null}},model:{value:e.dialog.usuario.email,callback:function(t){e.$set(e.dialog.usuario,"email",t)},expression:"dialog.usuario.email"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{label:"Senha",name:"senha",type:"password","error-messages":e.errors.first("senha")?e.errors.first("senha"):[]},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.salvar(t):null}},model:{value:e.dialog.usuario.senha,callback:function(t){e.$set(e.dialog.usuario,"senha",t)},expression:"dialog.usuario.senha"}})],1),e._v(" "),e._l(e.permissoes,function(t,n){return a("v-flex",{key:n,attrs:{xs12:"",sm6:"",md6:""}},[a("v-switch",{attrs:{label:t.nome,value:e.dialog.usuario.permissoes.find(function(e){return t.id===e})},on:{change:function(a){e.tooglePermissao(t.id)}}})],1)})],2)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"gray",flat:""},nativeOn:{click:function(t){e.dialog.show=!1}}},[e._v("Voltar")]),e._v(" "),a("v-btn",{attrs:{color:"accent ",loading:e.dialog.loading,disabled:e.dialog.loading},on:{click:e.salvar}},[e._v("Salvar\n                ")])],1)],1)],1),e._v(" "),a("v-data-table",{attrs:{headers:e.headers,items:e.usuarios,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(" "+e._s(t.item.email))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.editarUsuario(t.item)}}},[a("v-icon",{attrs:{color:"dark"}},[e._v("edit")])],1),e._v(" "),a("v-btn",{staticClass:"mx-0",attrs:{icon:"",disabled:e.loading},on:{click:function(a){e.removerUsuario(t.item)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)]}}])})],1)},i=[],r={render:n,staticRenderFns:i};t.a=r},102:function(e,t,a){"use strict";function n(e){a(103)}var i=a(42),r=a(137),o=a(5),s=n,l=o(i.a,r.a,!1,s,"data-v-3da3dbd4",null);t.a=l.exports},103:function(e,t){},137:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("v-container",{staticClass:"base-page-login",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md5:"",lg3:""}},[a("v-card",{staticClass:"elevation-12 card-login",attrs:{center:""}},[a("v-card-text",[a("v-form",{attrs:{"data-vv-scope":"login"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"prepend-icon":"person",id:"email",name:"email",label:"Email","error-messages":e.errors.first("login.email")?e.errors.first("login.email"):[],type:"email"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],attrs:{"prepend-icon":"lock",id:"senha",name:"senha",label:"Senha","error-messages":e.errors.first("login.senha")?e.errors.first("login.senha"):[],type:"password"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.loginForm.senha,callback:function(t){e.$set(e.loginForm,"senha",t)},expression:"loginForm.senha"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"accent",loading:e.loginForm.loading,disabled:e.loginForm.loading},on:{click:e.login},nativeOn:{click:function(t){e.loader="loginForm.loading"}}},[e._v("\n                Login\n              ")])],1)],1)],1)],1)],1)],1)],1)},i=[],r={render:n,staticRenderFns:i};t.a=r},138:function(e,t,a){"use strict";function n(e){a(139)}var i=a(55),r=a(140),o=a(5),s=n,l=o(i.a,r.a,!1,s,"data-v-4fad4efa",null);t.a=l.exports},139:function(e,t){},140:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("v-container",{staticClass:"base-page-login",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md5:"",lg3:""}},[a("v-card",{staticClass:"elevation-12 card-login",attrs:{center:""}},[a("v-card-text",[a("v-form",{attrs:{"data-vv-scope":"login"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"prepend-icon":"person",id:"email",name:"email",label:"Email","error-messages":e.errors.first("login.email")?e.errors.first("login.email"):[],type:"email"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],attrs:{"prepend-icon":"lock",id:"senha",name:"senha",label:"Senha","error-messages":e.errors.first("login.senha")?e.errors.first("login.senha"):[],type:"password"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.loginForm.senha,callback:function(t){e.$set(e.loginForm,"senha",t)},expression:"loginForm.senha"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"accent",loading:e.loginForm.loading,disabled:e.loginForm.loading},on:{click:e.login},nativeOn:{click:function(t){e.loader="loginForm.loading"}}},[e._v("\n                Login\n              ")])],1)],1)],1)],1)],1)],1)],1)},i=[],r={render:n,staticRenderFns:i};t.a=r},142:function(e,t){},143:function(e,t){},144:function(e,t){},145:function(e,t){Number.prototype.formatMoney=function(e,t,a){var n=this,e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,a=void 0==a?",":a,i=n<0?"-":"",r=String(parseInt(n=Math.abs(Number(n)||0).toFixed(e))),o=(o=r.length)>3?o%3:0;return i+(o?r.substr(0,o)+a:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")},String.prototype.upperFirst=function(){var e=this;return e.charAt(0).toUpperCase()+e.slice(1)},String.prototype.toFloatNumber=function(){return this.replaceAll(".","").replaceAll(",",".")},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.findBy=function(e,t){return this[this.findIndex(function(a){return a[e]===t})]},Array.prototype.findIndexBy=function(e,t){return this.findIndex(function(a){return a[e]===t})}},21:function(e,t,a){"use strict";var n=a(94),i=a.n(n),r=a(95),o=a.n(r),s=function(){function e(t,a){i()(this,e),this.messages=t,this.code=a}return o()(e,[{key:"hasInput",value:function(e){return!(void 0===this.messages[e])}},{key:"getMessageFromInput",value:function(e){return this.hasInput(e)?Array.isArray(this.messages[e])?this.messages[e].first().upperFirst():this.messages[e].upperFirst():""}},{key:"getMessage",value:function(){return this.messages}},{key:"getCode",value:function(){return this.code}}]),e}();t.a=s},31:function(e,t,a){"use strict";t.a={name:"app"}},32:function(e,t,a){"use strict";var n=a(8);t.a={name:"BasePage",data:function(){return{drawer:!1,menus:[{icon:"people",label:"Usuarios",route:"admin-usuarios",master:!0},{id:1,icon:"list",label:"Produtos",route:"produtos",master:!1},{id:2,icon:"group_work",label:"Categorias",route:"categorias",master:!1},{id:3,icon:"people",label:"Marcas",route:"marcas",master:!1}]}},computed:{isAdmin:function(){return"1"===localStorage.getItem("isMaster")}},methods:{hasPermissao:function(e){return!!localStorage.getItem("permissoes").split(",").find(function(t){return t==e})},routePush:function(e){this.$router.push({name:e})},pageName:function(){return this.$router.currentRoute.name.toUpperCase().replaceAll("-"," ")},getColorByRoute:function(e){return this.$router.currentRoute.name===e?"dark":"gray"},logout:function(){localStorage.removeItem(n.a),this.$router.push({name:"login"})}},mounted:function(){this.drawer="xl"===this.$vuetify.breakpoint.name||"lg"===this.$vuetify.breakpoint.name}}},33:function(e,t,a){"use strict";t.a={name:"Dashboard"}},34:function(e,t,a){"use strict";var n=a(9),i=a.n(n),r=a(8),o=a(21);t.a={name:"Usuarios",computed:{headers:function(){var e=[{text:"Email",value:"email"}];return e.push({text:"Ações",sortable:!1,align:"right"}),e}},methods:{tooglePermissao:function(e){var t=this.dialog.usuario.permissoes.indexOf(e);-1===t?this.dialog.usuario.permissoes.push(e):this.dialog.usuario.permissoes.splice(t,1)},criarUsuario:function(){this.dialog.show=!0,this.dialog.title="Novo Usuario",this.dialog.usuario={id:0,email:"",senha:"",permissoes:[]}},editarUsuario:function(e){this.dialog.show=!0,this.dialog.title="Editar Usuario",this.dialog.usuario=e},salvar:function(){var e=this;this.dialog.loading=!0,this.$validator.validateAll().then(function(t){if(!t)throw new Error;return 0===e.dialog.usuario.id?i.a.post(r.b+"usuario",e.dialog.usuario):i.a.put(r.b+"usuario/"+e.dialog.usuario.id,e.dialog.usuario)}).then(function(t){if(e.dialog.show=!1,0===e.dialog.usuario.id)e.usuarios.push(t.data.data);else{var a=e.usuarios.indexOf(e.dialog.usuario);e.usuarios.splice(a,1,t.data.data)}}).catch(function(t){t=new o.a(t),400===t.getCode()&&(t.hasInput("email")&&e.$validator.errors.add("email",t.getMessageFromInput("email")),t.hasInput("senha")&&e.$validator.errors.add("senha",t.getMessageFromInput("senha")))}).finally(function(){e.dialog.loading=!1})},removerUsuario:function(e){var t=this;this.loading=!0,i.a.delete(r.b+"usuario/"+e.id).finally(function(){t.loading=!1});var a=this.usuarios.indexOf(this.dialog.usuario);this.usuarios.splice(a,1)}},data:function(){return{loading:!1,permissoes:[],usuarios:[],dialog:{show:!1,loading:!1,title:"Novo Usuario",usuario:{id:0,email:"",senha:"",permissoes:[]}}}},created:function(){var e=this;i.a.get(r.b+"permissoes").then(function(t){e.permissoes=t.data.data}),i.a.get(r.b+"usuario?limit=0").then(function(t){e.usuarios=t.data.data})}}},42:function(e,t,a){"use strict";var n=a(43),i=a.n(n),r=a(9),o=a.n(r),s=a(8),l=a(21);t.a={name:"LoginAdmin",data:function(){return{loginForm:{email:"",senha:"",loading:!1}}},methods:{login:function(){var e=this;this.loginForm.loading=!0,this.errors.clear(),this.$validator.validateAll("login").then(function(t){if(!t)return e.loginForm.loading=!1,!1;e.sendLogin(e.loginForm.email,e.loginForm.senha).then(function(){if(localStorage.getItem("nextUrl"))return void e.$router.push(localStorage.get("nextUrl"));e.$router.push({name:"dashboard"})}).catch(function(t){400===t.getCode()&&(t.hasInput("email")&&e.$validator.errors.add("login.email",t.getMessageFromInput("email")),t.hasInput("senha")&&e.$validator.errors.add("login.senha",t.getMessageFromInput("senha")))}).finally(function(){e.loginForm.loading=!1})})},sendLogin:function(e,t){return new i.a(function(a,n){o.a.post(s.b+"login",{email:e,senha:t}).then(function(e){localStorage.setItem(s.a,e.data.token),localStorage.setItem("isMaster","1"),o.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem(s.a),a()}).catch(function(e){n(new l.a(e.response.data.data,e.response.status))})})}}}},55:function(e,t,a){"use strict";var n=a(43),i=a.n(n),r=a(9),o=a.n(r),s=a(8),l=a(21);t.a={name:"LoginUser",data:function(){return{loginForm:{email:"",senha:"",loading:!1}}},methods:{login:function(){var e=this;this.loginForm.loading=!0,this.errors.clear(),this.$validator.validateAll("login").then(function(t){if(!t)return e.loginForm.loading=!1,!1;e.sendLogin(e.loginForm.email,e.loginForm.senha).then(function(){if(localStorage.getItem("nextUrl"))return void e.$router.push(localStorage.get("nextUrl"));e.$router.push({name:"dashboard"})}).catch(function(t){console.log(t),400===t.getCode()&&(t.hasInput("email")&&e.$validator.errors.add("login.email",t.getMessageFromInput("email")),t.hasInput("senha")&&e.$validator.errors.add("login.senha",t.getMessageFromInput("senha")))}).finally(function(){e.loginForm.loading=!1})})},sendLogin:function(e,t){return new i.a(function(a,n){o.a.post(s.c+"login",{email:e,senha:t}).then(function(e){localStorage.setItem(s.a,e.data.token),localStorage.setItem("isMaster","0"),localStorage.setItem("permissoes",e.data.data.permissoes),o.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem(s.a),a()}).catch(function(e){e.response&&n(new l.a(e.response.data.data,e.response.status)),console.log(e)})})}}}},56:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(18),i=a(59),r=a(63),o=a.n(r),s=a(64),l=a(65),u=a.n(l),c=a(66),d=a(9),m=a.n(d),v=a(141),g=(a.n(v),a(142)),f=(a.n(g),a(143)),p=(a.n(f),a(144)),h=(a.n(p),a(8)),b=a(145);a.n(b);n.default.config.productionTip=!1,n.default.use(o.a,{theme:{primary:"#4F689C",dark:"#3F547C",accent:"#FFA500"}}),s.a.localize("pt_BR",u.a),n.default.use(s.b,{locale:"pt_BR"}),Object(v.loadProgressBar)(),m.a.interceptors.response.use(function(e){var t=e.headers.new_token;return t&&(localStorage.setItem(h.a,t),m.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem(h.a)),401===e.status&&"jwt_auth"===e.headers["WWW-Authenticate"]&&localStorage.removeItem(h.a),e}),m.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem(h.a),m.a.defaults.headers.common.Accept="application/json",new n.default({el:"#app",router:c.a,template:"<App/>",components:{App:i.a}})},59:function(e,t,a){"use strict";function n(e){a(60)}var i=a(31),r=a(62),o=a(5),s=n,l=o(i.a,r.a,!1,s,null,null);t.a=l.exports},60:function(e,t){},62:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r={render:n,staticRenderFns:i};t.a=r},66:function(e,t,a){"use strict";var n=a(18),i=a(67),r=a(68),o=a(71),s=a(74),l=a(102),u=a(138);n.default.use(i.a);var c=[{path:"/admin/login",name:"admin-login",component:l.a},{path:"/login",name:"login",component:u.a},{path:"/",component:r.a,children:[{path:"",name:"dashboard",component:o.a,meta:{auth:!0,master:!1}},{path:"/usuarios",name:"admin-usuarios",component:s.a,meta:{auth:!0,master:!0}}]}],d=new i.a({routes:c,mode:"history"});d.beforeEach(function(e,t,a){if(!e.name)return a({name:"dashboard"});var n=localStorage.getItem("jwt_token");return e.meta.auth&&!n?(localStorage.setItem("nextUrl",e.path),a({name:"login"})):(localStorage.removeItem("nextUrl"),!e.meta.auth&&n?a({name:"dashboard"}):e.meta.master&&"1"!==localStorage.getItem("isMaster")?a({name:"login"}):a())}),t.a=d},68:function(e,t,a){"use strict";function n(e){a(69)}var i=a(32),r=a(70),o=a(5),s=n,l=o(i.a,r.a,!1,s,"data-v-76d0218c",null);t.a=l.exports},69:function(e,t){},70:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},e._l(e.menus,function(t,n){return e.isAdmin&&t.master||!e.isAdmin&&!t.master&&e.hasPermissao(t.id)?a("v-list-tile",{key:n,attrs:{color:e.getColorByRoute(t.route)},on:{click:function(a){e.routePush(t.route)}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:e.getColorByRoute(t.route)}},[e._v(e._s(t.icon))])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.label))])],1)],1):e._e()}))],1),e._v(" "),a("v-toolbar",{attrs:{color:"primary",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v(e._s(e.pageName()))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-x-transition"}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:""},slot:"activator"},[a("v-icon",[e._v("settings")])],1),e._v(" "),a("v-list",[a("v-list-tile",{on:{click:function(t){e.logout()}}},[a("v-list-tile-action",[a("v-icon",[e._v("exit_to_app")])],1),e._v(" "),a("v-list-tile-title",[e._v("\n                        Sair\n                    ")])],1)],1)],1)],1),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:"",sm12:""}},[a("transition",[a("router-view")],1)],1)],1)],1)],1)],1)},i=[],r={render:n,staticRenderFns:i};t.a=r},71:function(e,t,a){"use strict";function n(e){a(72)}var i=a(33),r=a(73),o=a(5),s=n,l=o(i.a,r.a,!1,s,"data-v-87d7a80e",null);t.a=l.exports},72:function(e,t){},73:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[],r={render:n,staticRenderFns:i};t.a=r},74:function(e,t,a){"use strict";function n(e){a(75)}var i=a(34),r=a(101),o=a(5),s=n,l=o(i.a,r.a,!1,s,"data-v-2ae12cf6",null);t.a=l.exports},75:function(e,t){},8:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return o});var n="jwt_token",i="http://localhost:8000/api/",r=i+"admin/",o=i+"usuario/"}},[56]);
//# sourceMappingURL=app.608f5426fbf4587bfa05.js.map